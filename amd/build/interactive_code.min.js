define ("filter_ace_inline/interactive_code",["jquery"],function(a){function b(b,c,d,e){var f=a("<div><button type='button' class='btn btn-secondary' style='margin-bottom:6px;padding:2px 8px;'>"+b+"</button></div>"),g=a("<textarea readonly rows='"+e+"' style='font-family:monospace; font-size:12px;width:100%'></textarea>");c.after(f);f.after(g);M.util.js_pending("core/ajax");require(["core/ajax"],function(a){f.on("click",function(){a.call([{methodname:"qtype_coderunner_run_in_sandbox",args:{sourcecode:d.getValue(),language:"python3",stdin:""},done:function done(a){var b=JSON.parse(a),c=b.cmpinfo+b.output+b.stderr;g.val(c)},fail:function fail(a){alert("System error: please report: "+a)}}])});M.util.js_complete("core/ajax")})}function c(c,d,e){for(var f=d.getElementsByClassName("ace-interactive-code"),g="ace/mode/python",h=1,j=!0,k=e.button_label,l,m,n,o,p=0,q;p<f.length;p++){q=f[p];if("PRE"!==q.nodeName||q.hasAttribute("processing-done")||!q.closest("div[id^='question']")){continue}var r=a(q);n=r.html();o=n.split("\n").length;if(q.hasAttribute("lang")){g="ace/mode/"+q.getAttribute("lang")}if(q.hasAttribute("outputlines")){h=parseInt(q.getAttribute("outputlines"))}if(q.hasAttribute("hidelinenumbers")){j=!1}if(q.hasAttribute("showlinenumbers")){j=!0}if(q.hasAttribute("buttonname")){k=q.getAttribute("buttonname")}l=a("<div></div>");l.css({width:"100%",margin:"6px","line-height":"1.3"});r.after(l);m=c.edit(l.get(0),{newLineMode:"unix",mode:g,maxLines:o,fontSize:"11pt",showLineNumbers:j,showGutter:j,highlightActiveLine:j});m.$blockScrolling=1/0;var s=m.getSession();s.setValue(n);b(k,l,s,h);q.setAttribute("processing-done","");r.hide()}}return{init:function init(a){if(window.ace){c(window.ace,document,a)}}}});
//# sourceMappingURL=interactive_code.min.js.map
