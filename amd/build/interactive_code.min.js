define ("filter_ace_inline/interactive_code",["jquery"],function(a){function b(b,c,d){var e=a("<div><button type='button' class='btn btn-secondary' style='margin-bottom:6px;padding:2px 8px;'>"+d["button-name"]+"</button></div>"),f=a("<textarea readonly rows='"+d["output-lines"]+"' style='font-family:monospace; font-size:12px;width:100%'></textarea>");b.after(e);e.after(f);M.util.js_pending("core/ajax");require(["core/ajax"],function(a){e.on("click",function(){a.call([{methodname:"qtype_coderunner_run_in_sandbox",args:{sourcecode:c.getValue(),language:d.lang,stdin:d.stdin,files:d.files,params:d.params},done:function done(a){var b=JSON.parse(a),c=b.cmpinfo+b.output+b.stderr;f.val(c)},fail:function fail(a){alert("System error: please report: "+a.message+" "+a.debuginfo)}}])});M.util.js_complete("core/ajax")})}function c(c,d,e){for(var f=d.getElementsByClassName("ace-interactive-code"),g,h,j,k,l,m,n,o=0;o<f.length;o++){var p={lang:"python3","font-size":"11pt","output-lines":1,"start-line-number":1,"button-name":e.button_label,stdin:"",files:"",params:""},q=f[o];if("PRE"!==q.nodeName||q.hasAttribute("data-processing-done")||!q.closest("div[id^='question']")){continue}for(h in p){m="data-"+h;j=q.attributes.getNamedItem(m);if(j){l=j.value;if("start-line-number"===h&&"none"===l.toLowerCase()){l=null}else if("start-line-number"===h||"output-lines"===h){l=parseInt(l)}p[h]=l}}n=p["start-line-number"]?!0:!1;var r=a(q),g=r.text();k=g.split("\n").length;var s=a("<div></div>");s.css({width:"100%",margin:"6px","line-height":"1.3"});r.after(s);var t={newLineMode:"unix",mode:"ace/mode/python",maxLines:k,fontSize:p["font-size"],showLineNumbers:n,showGutter:n,highlightActiveLine:n};if(n){t.firstLineNumber=p["start-line-number"]}var u=c.edit(s.get(0),t);u.$blockScrolling=1/0;var v=u.getSession();v.setValue(g);b(s,v,p);q.setAttribute("data-processing-done","");r.hide()}}return{init:function init(a){if(window.ace){c(window.ace,document,a)}}}});
//# sourceMappingURL=interactive_code.min.js.map
