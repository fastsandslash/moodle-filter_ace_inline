function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var h=a.apply(b,c);function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}f(void 0)})}}define ("filter_ace_inline/ace_inline_code",["jquery"],function(a){function b(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"," ":"&nbsp;","\n":"<br>"};return a.replace(/[&<>"' \n]/g,function(a){return b[a]})}function c(a,b){var c,d,e,f,g={};for(c in b){d=a.attributes.getNamedItem(c);if(d){f=c}else{f="data-"+c;d=a.attributes.getNamedItem(f)}if(d){e=d.value;if("start-line-number"===c){e="none"===e.toLowerCase()?null:parseInt(e)}}else{e=b[c]}g[c]=e}return g}function d(c,d,e){require(["core/str"],function(f){var g=f.get_string(c,"filter_ace_inline");a.when(g).then(function(a){d.show();d.html(b("*** "+a+" ***\n"+e))})})}function e(a){for(var b=[[1,0,"error_access_denied"],[2,0,"error_unknown_language"],[3,0,"error_access_denied"],[4,0,"error_submission_limit_reached"],[5,0,"error_sandbox_server_overload"],[0,11,""],[0,12,""],[0,13,"error_timeout"],[0,15,""],[0,17,"error_memory_limit"],[0,21,"error_sandbox_server_overload"],[0,30,"error_excessive_output"]],c=0,d;c<b.length;c++){d=b[c];if(d[0]==a.error&&(0!=a.error||a.result==d[1])){return d[2]}}return"error_unknown_runtime"}function f(a,b){var c=function(a){return a.length<=b?a:a.substr(0,b)+"... (truncated)"};return a.cmpinfo+c(a.output)+c(a.stderr)}function g(c,g,h,i){var j=null!==i["html-output"],k=i["max-output-length"];g.html("");if(j){g.hide()}g.next("div.filter-ace-inline-html").remove();var l=h.getValue(),m=i["code-mapper"];if(m){l=window[m](l)}l=i.prefix+l+i.suffix;c.call([{methodname:"qtype_coderunner_run_in_sandbox",args:{contextid:M.cfg.contextid,sourcecode:l,language:i.lang,stdin:i.stdin,files:i.files,params:i.params},done:function done(c){var h=JSON.parse(c),i=e(h);if(""===i){if(!j||h.result!==15){var l=f(h,k);g.show();g.html(b(l))}else{g.next("div.filter-ace-inline-html").remove();var m=a("<div class='filter-ace-inline-html 'style='background-color:#eff;padding:5px;'"+h.output+"</div>");g.after(m)}}else{var n=0==h.error?f(h,k):"";if("error_unknown_runtime"===i){n+=h.error?"(Sandbox error code "+h.error+")":"(Run result: "+h.result+")"}d(i,g,n)}},fail:function fail(a){alert(a.message)}}])}function h(b,c,d){var e=a("<div><button type='button' class='btn btn-secondary' style='margin-bottom:6px;padding:2px 8px;'>"+d["button-name"]+"</button></div>"),f=a("<p style='font-family:monospace; font-size:12px;width:100%;background-color:#eff;border:1px gray;padding:5px;overflow-wrap:break-word;max-height:600px;overflow:auto;'></p>");b.after(e);e.after(f);f.hide();M.util.js_pending("core/ajax");require(["core/ajax"],function(a){e.on("click",function(){g(a,f,c,d)})});M.util.js_complete("core/ajax")}function i(a,b){k(a,b,!1,{lang:"python3","font-size":"11pt","start-line-number":null,readonly:!0})}function j(a,b,c){var d={lang:"python3","font-size":"11pt","start-line-number":1,"button-name":c.button_label,readonly:null,stdin:"",files:"",prefix:"",suffix:"",params:"{\"cputime\": 5}","code-mapper":null,"html-output":null,"max-output-length":1e4};k(a,b,!0,d)}function k(b,d,e,f){for(var g=e?"ace-interactive-code":"ace-highlight-code",j=d.getElementsByClassName(g),k={margin:"6px","line-height":"1.3"},l=0,m;l<j.length;l++){m=j[l];if("PRE"===m.nodeName&&"none"!==m.style.display){var n=c(m,f),o=n["start-line-number"]?!0:!1,p=a(m),q=p.text(),r=q.split("\n").length,s=a("<div></div>");k["min-width"]=m.scrollWidth;s.css(k);p.after(s);var t={newLineMode:"unix",mode:"ace/mode/python",minLines:r,maxLines:50,fontSize:n["font-size"],showLineNumbers:o,firstLineNumber:n["start-line-number"],showGutter:o,showPrintMargin:!1,autoScrollEditorIntoView:!0,highlightActiveLine:o},u=b.edit(s.get(0),t),v=u.getSession();v.setValue(q);if(null!==n.readonly){u.setReadOnly(!0)}if(e){h(s,v,n)}else{u.renderer.$cursorLayer.element.style.display="none"}p.hide()}}}return{initAceInteractive:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:if(window.ace_inline_code_interactive_done){a.next=8;break}case 1:if(window.ace){a.next=6;break}a.next=4;return new Promise(function(a){return setTimeout(a,1e3)});case 4:a.next=1;break;case 6:j(window.ace,document,b);window.applyAceInteractive=function(){j(window.ace,document,b)};case 8:window.ace_inline_code_interactive_done=!0;case 9:case"end":return a.stop();}}},a)}));return function initAceInteractive(){return a.apply(this,arguments)}}(),initAceHighlighting:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:if(window.ace_inline_code_highlighting_done){a.next=8;break}case 1:if(window.ace){a.next=6;break}a.next=4;return new Promise(function(a){return setTimeout(a,1e3)});case 4:a.next=1;break;case 6:i(window.ace,document);window.applyAceHighlighting=function(){i(window.ace,document)};case 8:window.ace_inline_code_highlighting_done=!0;case 9:case"end":return a.stop();}}},a)}));return function initAceHighlighting(){return a.apply(this,arguments)}}()}});
//# sourceMappingURL=ace_inline_code.min.js.map
