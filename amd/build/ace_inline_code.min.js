define ("filter_ace_inline/ace_inline_code",["jquery"],function(a){function b(a,b){var c,d,e,f,g={};for(c in b){d=a.attributes.getNamedItem(c);if(d){f=c}else{f="data-"+c;d=a.attributes.getNamedItem(f)}if(d){e=d.value;if("start-line-number"===c&&"none"===e.toLowerCase()){e=null}else if("start-line-number"===c||"output-lines"===c){e=parseInt(e)}}else{e=b[c]}g[c]=e}if(!1!==g.readonly){g.readonly=!0}return g}function c(b,c){require(["core/str"],function(d){var e=d.get_string(b,"filter_ace_inline");a.when(e).then(function(a){c.val("*** "+a+" ***")})})}function d(a,b){if(11==a){c("result_compilation_error",b)}else if(12==a){c("result_runtime_error",b)}else if(13==a){c("result_time_limit",b)}else if(17==a){c("result_memory_limit",b)}else if(21==a){c("result_server_overload",b)}else{c("result_unknown_error",b)}}function e(b,c,e){var f=a("<div><button type='button' class='btn btn-secondary' style='margin-bottom:6px;padding:2px 8px;'>"+e["button-name"]+"</button></div>"),g=a("<textarea readonly rows='"+e["output-lines"]+"' style='font-family:monospace; font-size:12px;width:100%'></textarea>");b.after(f);f.after(g);M.util.js_pending("core/ajax");require(["core/ajax"],function(a){f.on("click",function(){a.call([{methodname:"qtype_coderunner_run_in_sandbox",args:{sourcecode:c.getValue(),language:e.lang,stdin:e.stdin,files:e.files,params:e.params},done:function done(a){var b=JSON.parse(a);if(15===b.result){var c=b.cmpinfo+b.output+b.stderr;g.val(c)}else{d(b.result,g)}},fail:function fail(a){alert("System error: please report: "+a.message+" "+a.debuginfo)}}])});M.util.js_complete("core/ajax")})}function f(a,b){h(a,b,"ace-highlight-code",{isInteractive:!1,lang:"python3","font-size":"11pt","start-line-number":null,readonly:!0})}function g(a,b,c){var d={isInteractive:!0,lang:"python3","font-size":"11pt","output-lines":1,"start-line-number":1,"button-name":c.button_label,readonly:!1,stdin:"",files:"",params:"{\"cputime\": 1}"};h(a,b,"ace-interactive-code",d)}function h(c,d,f,g){for(var h,j,k,l={width:"100%",margin:"6px","line-height":"1.3"},m=d.getElementsByClassName(f),n=0,o;n<m.length;n++){o=m[n];if("PRE"!==o.nodeName||o.hasAttribute("data-processing-done")||!o.closest("div[id^='question']")){continue}var q=b(o,g);k=q["start-line-number"]?!0:!1;var p=a(o),h=p.text();j=h.split("\n").length;var r=a("<div></div>");r.css(l);p.after(r);var s={newLineMode:"unix",mode:"ace/mode/python",maxLines:j,fontSize:q["font-size"],showLineNumbers:k,showGutter:k,highlightActiveLine:k};if(k){s.firstLineNumber=q["start-line-number"]}var t=c.edit(r.get(0),s);if(q.readonly){t.setReadOnly(!0)}var u=t.getSession();u.setValue(h);if(q.isInteractive){e(r,u,q)}o.setAttribute("data-processing-done","");p.hide()}}return{initAceInteractive:function initAceInteractive(a){if(window.ace){g(window.ace,document,a)}},initAceHighlighting:function initAceHighlighting(){if(window.ace){f(window.ace,document)}}}});
//# sourceMappingURL=ace_inline_code.min.js.map
