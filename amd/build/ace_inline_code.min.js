define ("filter_ace_inline/ace_inline_code",["jquery"],function(a){function b(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"," ":"&nbsp;","\n":"<br>"};return a.replace(/[&<>"' \n]/g,function(a){return b[a]})}function c(a,b){var c,d,e,f,g={};for(c in b){d=a.attributes.getNamedItem(c);if(d){f=c}else{f="data-"+c;d=a.attributes.getNamedItem(f)}if(d){e=d.value;if("start-line-number"===c){e="none"===e.toLowerCase()?null:parseInt(e)}}else{e=b[c]}g[c]=e}return g}function d(c,d,e){require(["core/str"],function(f){var g=f.get_string(c,"filter_ace_inline");a.when(g).then(function(a){d.show();d.html(b("*** "+a+" ***\n"+e))})})}function e(a,b,c){if(11==a){d("result_compilation_error",b,c)}else if(12==a){d("result_runtime_error",b,c)}else if(13==a){d("result_time_limit",b,c)}else if(17==a){d("result_memory_limit",b,c)}else if(21==a){d("result_server_overload",b,c)}else{d("result_unknown_error",b,c)}}function f(c,d,f){var g=null!==f["html-output"],h=a("<div><button type='button' class='btn btn-secondary' style='margin-bottom:6px;padding:2px 8px;'>"+f["button-name"]+"</button></div>"),i=a("<p style='font-family:monospace; font-size:12px;width:100%; background-color:white;border:1px gray;padding:5px;margin-bottom:20px'></p>");c.after(h);h.after(i);i.hide();M.util.js_pending("core/ajax");require(["core/ajax"],function(c){h.on("click",function(){i.html("");if(g){i.hide()}var h=i.next("div.filter-ace-inline-html");if(h){h.remove()}var j=f.prefix+d.getValue()+f.suffix;c.call([{methodname:"qtype_coderunner_run_in_sandbox",args:{sourcecode:j,language:f.lang,stdin:f.stdin,files:f.files,params:f.params},done:function done(c){var d=JSON.parse(c),f=d.cmpinfo+d.output+d.stderr;if(15===d.result){if(g){var h=a("<div class='filter-ace-inline-html 'style='background-color:#EFF;padding:5px;margin-bottom:20px'>"+d.output+"</div>");i.after(h)}else{i.show();i.html(b(f))}}else{e(d.result,i,f)}},fail:function fail(a){alert("System error: please report: "+a.message+" "+a.debuginfo)}}])});M.util.js_complete("core/ajax")})}function g(a,b){i(a,b,"ace-highlight-code",{isInteractive:!1,lang:"python3","font-size":"11pt","start-line-number":null,readonly:!0})}function h(a,b,c){var d={isInteractive:!0,lang:"python3","font-size":"11pt","start-line-number":1,"button-name":c.button_label,readonly:null,stdin:"",files:"",params:"{\"cputime\": 2}",prefix:"",suffix:"","html-output":null};i(a,b,"ace-interactive-code",d)}function i(b,d,e,g){for(var h,j,k,l={width:"100%",margin:"6px","line-height":"1.3"},m=d.getElementsByClassName(e),n=0,o;n<m.length;n++){o=m[n];if("PRE"!==o.nodeName||o.hasAttribute("data-processing-done")||!o.closest("div[id^='question']")){continue}var s=c(o,g);k=s["start-line-number"]?!0:!1;var p=a(o),h=p.text();j=h.split("\n").length;var t=a("<div></div>");if(!s.isInteractive){l["margin-bottom"]="20px"}t.css(l);p.after(t);var u={newLineMode:"unix",mode:"ace/mode/python",minLines:j,maxLines:50,fontSize:s["font-size"],showLineNumbers:k,showGutter:k,autoScrollEditorIntoView:!0,highlightActiveLine:k};if(k){u.firstLineNumber=s["start-line-number"]}var q=b.edit(t.get(0),u),r=q.getSession();r.setValue(h);if(null!==s.readonly){q.setReadOnly(!0)}if(s.isInteractive){f(t,r,s)}o.setAttribute("data-processing-done","");p.hide()}}return{initAceInteractive:function initAceInteractive(a){if(window.ace){h(window.ace,document,a)}},initAceHighlighting:function initAceHighlighting(){if(window.ace){g(window.ace,document)}}}});
//# sourceMappingURL=ace_inline_code.min.js.map
